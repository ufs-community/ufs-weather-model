###############################################################################
#
#  FV3 CCPP c768 Gaussian grid nemsio output test
#
###############################################################################

export TEST_DESCR="Compare FV3 CCPP c768 Gaussian grid nemsio output results with previous trunk version"

export CNTL_DIR=fv3_wrtGauss_nemsio_c768

export LIST_FILES="atmos_4xdaily.tile1.nc \
                   atmos_4xdaily.tile2.nc \
                   atmos_4xdaily.tile3.nc \
                   atmos_4xdaily.tile4.nc \
                   atmos_4xdaily.tile5.nc \
                   atmos_4xdaily.tile6.nc \
                   phyf003.nemsio   \
                   dynf003.nemsio   \
                   RESTART/coupler.res \
                   RESTART/fv_core.res.nc \
                   RESTART/fv_core.res.tile1.nc \
                   RESTART/fv_core.res.tile2.nc \
                   RESTART/fv_core.res.tile3.nc \
                   RESTART/fv_core.res.tile4.nc \
                   RESTART/fv_core.res.tile5.nc \
                   RESTART/fv_core.res.tile6.nc \
                   RESTART/fv_srf_wnd.res.tile1.nc \
                   RESTART/fv_srf_wnd.res.tile2.nc \
                   RESTART/fv_srf_wnd.res.tile3.nc \
                   RESTART/fv_srf_wnd.res.tile4.nc \
                   RESTART/fv_srf_wnd.res.tile5.nc \
                   RESTART/fv_srf_wnd.res.tile6.nc \
                   RESTART/fv_tracer.res.tile1.nc \
                   RESTART/fv_tracer.res.tile2.nc \
                   RESTART/fv_tracer.res.tile3.nc \
                   RESTART/fv_tracer.res.tile4.nc \
                   RESTART/fv_tracer.res.tile5.nc \
                   RESTART/fv_tracer.res.tile6.nc \
                   RESTART/phy_data.tile1.nc \
                   RESTART/phy_data.tile2.nc \
                   RESTART/phy_data.tile3.nc \
                   RESTART/phy_data.tile4.nc \
                   RESTART/phy_data.tile5.nc \
                   RESTART/phy_data.tile6.nc \
                   RESTART/sfc_data.tile1.nc \
                   RESTART/sfc_data.tile2.nc \
                   RESTART/sfc_data.tile3.nc \
                   RESTART/sfc_data.tile4.nc \
                   RESTART/sfc_data.tile5.nc \
                   RESTART/sfc_data.tile6.nc \
                   out_grd.glo_10m
                   out_grd.ant_9km
                   out_grd.aoc_9km"


export_fv3

export TASKS=1470
if [[ $MACHINE_ID = cheyenne.* ]]; then
  export TPN=36
elif [[ $MACHINE_ID = hera.* ]]; then
  export TPN=10
elif [[ $MACHINE_ID = wcoss_cray ]]; then
  export TPN=6
else
  export TPN=12
fi


export INPES=16
export JNPES=12
export NPX=769
export NPY=769
export NPZ=64
export NPZP=65
export SYEAR=2017
export SMONTH=01
export SDAY=06
export DT_ATMOS=225
export FHMAX=03
export WLCLK=30
export WRITE_GROUP=3
export WRTTASK_PER_GROUP=36
export FDIAG=0,1,2,3,4,5,6
export OUTPUT_GRID="'gaussian_grid'"
export OUTPUT_FILE="'nemsio'"
export WRITE_NEMSIOFLIP=.true.
export WRITE_FSYNCFLAG=.true.
export IMO=3072
export JMO=1536
export FNALBC="'global_snowfree_albedo.bosu.t1534.3072.1536.rg.grb',"
export FNVETC="'global_vegtype.igbp.t1534.3072.1536.rg.grb',"
export FNSOTC="'global_soiltype.statsgo.t1534.3072.1536.rg.grb',"
export FNSMCC="'global_soilmgldas.t1534.3072.1536.grb',"
export FNABSC="'global_mxsnoalb.uariz.t1534.3072.1536.rg.grb',"

export CPL=.true.
export CPLWAV=.T.
export atm_model='fv3'
export atm_petlist_bounds="0 1259"
export wav_model='ww3'
export wav_petlist_bounds="1260 1469"
export coupling_interval_sec=1800.0  #coupling time step, want it to be multiple of 1800 and FV3 time step
export NEMS_CONFIGURE="nems.configure.blocked_atm_wav.IN"

export NFGRIDS=1
export NMGRIDS=3
export CPLILINE="'glo_15mxt'  F F T F F F F"
export ww3gline="'glo_10m' 'no' 'no' 'CPL:glo_15mxt' 'no'  'no' 'no' 'no'  1 10  0.00 1.00  F\n"
export ww3gline="${ww3gline}'aoc_9km' 'no' 'no' 'CPL:glo_15mxt' 'no'  'no' 'no' 'no'  2 20  0.00 1.00  F\n"
export ww3gline="${ww3gline}'ant_9km' 'no' 'no' 'CPL:glo_15mxt' 'no'  'no' 'no' 'no'  3 30  0.00 1.00  F"

export FV3_RUN=control_run.IN
export CCPP_SUITE=FV3_GFS_2017
export INPUT_NML=control.nml.IN

